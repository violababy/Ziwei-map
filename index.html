<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ç´«å¾®é£›æ˜Ÿè¦–è¦ºå¼•æ“</title>

<style>
body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
  padding: 20px;
}

h1 {
  text-align: center;
}

svg {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.palace {
  fill: #f9fafb;
  stroke: #333;
  stroke-width: 1.5;
  rx: 12;
}

.palace-text {
  font-size: 14px;
  text-anchor: middle;
  dominant-baseline: middle;
  fill: #222;
  font-weight: 600;
}
</style>
</head>

<body>

<h1>ğŸ”® ç´«å¾®é£›æ˜Ÿè¦–è¦ºå¼•æ“ï¼ˆæ¸¬è©¦ç‰ˆï¼‰</h1>

<div style="overflow-x:auto;">
<svg id="board" width="1100" height="800">

<!-- ========== ç®­é ­å®šç¾© ========== -->
<defs>
  <marker id="arrow-green" viewBox="0 0 10 10" refX="10" refY="5"
          markerWidth="8" markerHeight="8" orient="auto-start-reverse">
    <path d="M 0 0 L 10 5 L 0 10 z" fill="#1f7a1f"/>
  </marker>

  <marker id="arrow-darkblue" viewBox="0 0 10 10" refX="10" refY="5"
          markerWidth="8" markerHeight="8" orient="auto-start-reverse">
    <path d="M 0 0 L 10 5 L 0 10 z" fill="#0b3c8a"/>
  </marker>

  <marker id="arrow-lightblue" viewBox="0 0 10 10" refX="10" refY="5"
          markerWidth="8" markerHeight="8" orient="auto-start-reverse">
    <path d="M 0 0 L 10 5 L 0 10 z" fill="#4aa3df"/>
  </marker>

  <marker id="arrow-red" viewBox="0 0 10 10" refX="10" refY="5"
          markerWidth="8" markerHeight="8" orient="auto-start-reverse">
    <path d="M 0 0 L 10 5 L 0 10 z" fill="#d12b2b"/>
  </marker>
</defs>

<!-- ========== å®®ä½æ–¹æ¡† ========== -->

<!-- ä¸Šæ’ -->
<rect class="palace" x="100" y="60" width="180" height="110"/>
<text class="palace-text" x="190" y="115">å­å¥³</text>

<rect class="palace" x="320" y="60" width="180" height="110"/>
<text class="palace-text" x="410" y="115">å¤«å¦»</text>

<rect class="palace" x="540" y="60" width="180" height="110"/>
<text class="palace-text" x="630" y="115">å…„å¼Ÿ</text>

<rect class="palace" x="760" y="60" width="180" height="110"/>
<text class="palace-text" x="850" y="115">å‘½å®®</text>

<!-- å·¦å´ -->
<rect class="palace" x="100" y="230" width="180" height="110"/>
<text class="palace-text" x="190" y="285">è²¡å¸›</text>

<rect class="palace" x="100" y="400" width="180" height="110"/>
<text class="palace-text" x="190" y="455">ç–¾å„</text>

<!-- å³å´ -->
<rect class="palace" x="760" y="230" width="180" height="110"/>
<text class="palace-text" x="850" y="285">çˆ¶æ¯</text>

<rect class="palace" x="760" y="400" width="180" height="110"/>
<text class="palace-text" x="850" y="455">ç¦å¾·</text>

<!-- ä¸‹æ’ -->
<rect class="palace" x="100" y="570" width="180" height="110"/>
<text class="palace-text" x="190" y="625">é·ç§»</text>

<rect class="palace" x="320" y="570" width="180" height="110"/>
<text class="palace-text" x="410" y="625">åƒ•å½¹</text>

<rect class="palace" x="540" y="570" width="180" height="110"/>
<text class="palace-text" x="630" y="625">å®˜ç¥¿</text>

<rect class="palace" x="760" y="570" width="180" height="110"/>
<text class="palace-text" x="850" y="625">ç”°å®…</text>

</svg>
</div>

<script>
// =======================
// å®®ä½ä¸­å¿ƒåº§æ¨™
// =======================
const palaceMap = {
  P1:  { name: "å‘½å®®", x: 850, y: 115 },
  P2:  { name: "çˆ¶æ¯", x: 850, y: 285 },
  P3:  { name: "ç¦å¾·", x: 850, y: 455 },
  P4:  { name: "ç”°å®…", x: 850, y: 625 },
  P5:  { name: "å®˜ç¥¿", x: 630, y: 625 },
  P6:  { name: "åƒ•å½¹", x: 410, y: 625 },
  P7:  { name: "é·ç§»", x: 190, y: 625 },
  P8:  { name: "ç–¾å„", x: 190, y: 455 },
  P9:  { name: "è²¡å¸›", x: 190, y: 285 },
  P10: { name: "å­å¥³", x: 190, y: 115 },
  P11: { name: "å¤«å¦»", x: 410, y: 115 },
  P12: { name: "å…„å¼Ÿ", x: 630, y: 115 }
};

// =======================
// å››åŒ–é¡è‰²èˆ‡ç®­é ­è¨­å®š
// =======================
const flowStyles = {
  "ç¥¿": { color: "#1f7a1f", marker: "arrow-green" },      
  "æ¬Š": { color: "#0b3c8a", marker: "arrow-darkblue" },  
  "ç§‘": { color: "#4aa3df", marker: "arrow-lightblue" }, 
  "å¿Œ": { color: "#d12b2b", marker: "arrow-red" }        
};

// =======================
// é£›åŒ–è³‡æ–™ï¼ˆä½ æœªä¾†åªè¦æ”¹é€™è£¡ï¼‰
// =======================
const flows = [
  { from: "P1", to: "P5", type: "ç¥¿" },
  { from: "P5", to: "P9", type: "æ¬Š" },
  { from: "P3", to: "P12", type: "å¿Œ" }
];

// =======================
// ç•«ç®­é ­å‡½æ•¸
// =======================
function drawArrow(flow) {
  const start = palaceMap[flow.from];
  const end   = palaceMap[flow.to];
  if (!start || !end) return;

  const svg = document.getElementById("board");
  const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
  const style = flowStyles[flow.type] || { color: "#999", marker: null };

  // ===== è¨ˆç®—æ–¹å‘å‘é‡ï¼ˆé¿å…å£“åˆ°æ–‡å­—ï¼‰=====
  const dx = end.x - start.x;
  const dy = end.y - start.y;
  const length = Math.sqrt(dx * dx + dy * dy) || 1;

  // èµ·é»èˆ‡çµ‚é»å¾€å…§ç¸®çš„è·é›¢ï¼ˆå¯å¾®èª¿ï¼‰
  const padding = 30;

  const offsetX = (dx / length) * padding;
  const offsetY = (dy / length) * padding;

  const x1 = start.x + offsetX;
  const y1 = start.y + offsetY;
  const x2 = end.x - offsetX;
  const y2 = end.y - offsetY;

  // ===== ç•«ç·š =====
  line.setAttribute("x1", x1);
  line.setAttribute("y1", y1);
  line.setAttribute("x2", x2);
  line.setAttribute("y2", y2);
  line.setAttribute("stroke", style.color);
  line.setAttribute("stroke-width", "2");   // â† ç·šè®Šç´°
  line.setAttribute("opacity", "0.95");

  if (style.marker) {
    line.setAttribute("marker-end", `url(#${style.marker})`);
  }

  svg.appendChild(line);
}

// =======================
// åˆå§‹åŒ–ç¹ªåœ–
// =======================
window.onload = () => {
  flows.forEach(drawArrow);
};
</script>

</body>
</html>
